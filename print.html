<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Templar</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><strong aria-hidden="true">3.</strong> Quick Start</li><li class="chapter-item expanded "><strong aria-hidden="true">4.</strong> Command Line<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cli/usage.html"><strong aria-hidden="true">4.1.</strong> Usage</a></li></ol></li><li class="chapter-item expanded "><a href="templates/intro.html"><strong aria-hidden="true">5.</strong> Templating</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="templates/syntax.html"><strong aria-hidden="true">5.1.</strong> Syntax</a></li><li class="chapter-item "><a href="templates/expressions.html"><strong aria-hidden="true">5.2.</strong> Expressions</a></li><li class="chapter-item "><a href="templates/filters.html"><strong aria-hidden="true">5.3.</strong> Filters</a></li><li class="chapter-item "><a href="templates/functions.html"><strong aria-hidden="true">5.4.</strong> Functions</a></li></ol></li><li class="chapter-item expanded "><a href="api.html"><strong aria-hidden="true">6.</strong> API Documentation</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Templar</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/proctorlabs/templar" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>Templar is a templating tool for the command line or available as a library for Rust. Templar
attempts to be a lightweight tool that runs with very few dependencies, distributed in binary form
for a number of architectures.</p>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>We try to supply easy install methods for different platforms on a best-effort basis.</p>
<h2><a class="header" href="#binary-install" id="binary-install">Binary Install</a></h2>
<p>The primary way Templar is distributed is in binary form from <a href="https://github.com/proctorlabs/templar/releases">Github</a>.
Binaries are available for a number of platforms and can be quickly installed via script. A simple script install can
be like this:</p>
<pre><code class="language-bash"># Make sure to pick the architecture and variant for your platform
curl -sL https://github.com/proctorlabs/templar/releases/download/v0.3.0/templar-x86_64-unknown-linux-gnu.tar.xz |
    tar -xJ -C /usr/local/bin &amp;&amp; chmod +x /usr/local/bin/templar
</code></pre>
<h2><a class="header" href="#cargo-source" id="cargo-source">Cargo (source)</a></h2>
<p>If Cargo is available, templar can be quickly installed with this command:</p>
<pre><code class="language-bash">cargo install --all-features templar
</code></pre>
<h1><a class="header" href="#templar-cli" id="templar-cli">Templar CLI</a></h1>
<p>The CLI can be used to run expressions or execute templates to STDOUT or an output file.</p>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<p>Tu process a template, <code>templar template &lt;args&gt;</code></p>
<pre><code class="language-bash">templar-template 0.3.0
Execute a template and render the output

USAGE:
    templar template &lt;file&gt;

OPTIONS:
    -d, --dynamic &lt;dynamic&gt;...    File to parse and load into the templating context as a dynamic input
    -h, --help                    Prints help information
    -i, --input &lt;input&gt;...        File to parse and load into the templating context
    -o, --output &lt;output&gt;         Output to send the result to, defaults to stdout
    -s, --set &lt;set&gt;...            Directly set a variable on the context

ARGS:
    &lt;file&gt;    Template file(s) to open
</code></pre>
<p>To run an expression directly, <code>templar expression &lt;args&gt;</code></p>
<pre><code class="language-bash">templar-expression 0.3.0
Execute an expression and render the output

USAGE:
    templar expression &lt;text&gt;

OPTIONS:
    -d, --dynamic &lt;dynamic&gt;...    File to parse and load into the templating context as a dynamic input
    -h, --help                    Prints help information
    -i, --input &lt;input&gt;...        File to parse and load into the templating context
    -o, --output &lt;output&gt;         Output to send the result to, defaults to stdout
    -s, --set &lt;set&gt;...            Directly set a variable on the context

ARGS:
    &lt;text&gt;    The expression to run
</code></pre>
<h1><a class="header" href="#templating" id="templating">Templating</a></h1>
<p>Templar's templating syntax is inspired by Jinja2 and Ansible.</p>
<h2><a class="header" href="#examples" id="examples">Examples</a></h2>
<p>The templating syntax is likely familiar considering the frameworks that it is based on. For instance, a
simple template may look like this:</p>
<pre><code class="language-properties">user_name={{ user.name }} {# Replace with the context property 'name' in 'user' #}
full_context={{ . | json(&quot;pretty&quot;) }} {# Dump the entire context as JSON, '.' is the root node #}
password={{ script('echo hunter2 | md5sum') }} {# Execute a shell command and calculate the MD5 sum #}
</code></pre>
<p>In addition to simple replacements, more complex expressions can be used.</p>
<pre><code class="language-markdown">The calculated result is {{ 100 * 5 / 10 }} {#- Prints '50' #}

Today's guest list:
{%- for person in ['Bob', 'Joe', 'Jen', 'Amy')] %}
* {{ person }} will come to the party!
{%- endfor %} {#- This will loop everyone in the inline array above, but they array could also come from the context #}
</code></pre>
<h1><a class="header" href="#syntax" id="syntax">Syntax</a></h1>
<p>Much of the syntax is based on the wonderful <a href="https://jinja.palletsprojects.com/en/2.10.x/">Jinja2</a> project. Here are some
of the currently supported features.</p>
<ul>
<li>Value replacement can be done using the <code>{{ }}</code> syntax.
<ul>
<li>Literals supported are strings (single, double, or backtick quoted), boolean, numbers (currently parsed as i64), null, arrays, and maps</li>
<li>Identifiers that start with an alphabetic character can be referred to directly e.g. <code>{{ some.value.path }}</code></li>
<li>The root node can be referred to with <code>.</code> allowing things like <code>{{ . | json }}</code> to be used to dump the entire context as JSON</li>
<li>Identifiers of non-standard type, e.g. starting with a non-alphabetic character, spaces, etc. can be referred to using the
bracket syntax. e.g. <code>{{ .['565'] }}</code>. This also allows array access and identifier of non-standard types (such as boolean).</li>
<li>Inline arrays: <code>{{ [1,2,3,4] }}</code> and complex nesting also possible e.g. <code>{{ [1,2, script(&quot;echo 'hello world!'&quot;), (5 + 5 | base64)] }}</code></li>
<li>Inline maps: <code>{{ {'key': 'value', 'otherKey': { 'nested': 'map' } } }}</code></li>
</ul>
</li>
<li>Control flow can be done using the <code>{% %}</code> syntax
<ul>
<li>If/else if: <code>{% if 10/2 == 5 %}The world is sane!{% else if false %}What universe are we in?{% end if %}</code></li>
<li>Scoping can be done manually: <code>{% scope %}I'm in a scope!{% end scope %}</code></li>
<li>For loops: <code>{% for thing in lots.of.stuff %} {{ thing['name'] }} {% end for %}</code>. For loops always enter a new scope.</li>
</ul>
</li>
<li>Comments use the <code>{# #}</code> syntax and will be remitted from the output.</li>
<li>Whitespace control can be accomplished by adding a <code>-</code> to any of the above blocks e.g. <code>{{- 'no whitespace! -}}</code>.
<ul>
<li>Whitespace control can be added to one or both sides of the tags. All spaces, new lines, or other whitespace on the side with the <code>-</code>
on it will be removed as if the block is immediately next to the other element.</li>
</ul>
</li>
</ul>
<p>As documentation is still in progress, see the <a href="templates/./examples/kitchen_sink.tmpl">kitchen sink</a> for examples of template usage.</p>
<h1><a class="header" href="#expressions" id="expressions">Expressions</a></h1>
<p>Everything inside the standard <code>{{ }}</code> block is an expression. Each block holds exactly one expression, but that expression can be chained with
many individual operations. A quick overview:</p>
<ul>
<li>Math operations: <code>+ - * / %</code> these operations are only valid with numeric types</li>
<li>Equality: <code>== != &lt; &lt;= &gt; &gt;= &amp;&amp; ||</code></li>
<li>Value setting: <code>=</code> the left side of this operation must be some identifier e.g. <code>{{ some.val.path = 'hello world!' }}</code></li>
<li>String concatenation: <code>~</code> e.g. <code>{{ 'Hello' ~ ' ' ~ 'world!' }}</code> prints &quot;Hello world!&quot;</li>
<li>Functions: <code>ident()</code> e.g. <code>{{ env('USER') }}</code> would retrieve the value of the environment variable &quot;USER&quot;.</li>
<li>Filters: <code>|</code> e.g. <code>{{ 'hello world' | upper }}</code> would use the 'upper' filter to print &quot;HELLO WORLD&quot;</li>
</ul>
<p>As documentation is still in progress, see the <a href="templates/./src/test/expressions.rs">expression tests</a> for examples of expression usage.</p>
<h1><a class="header" href="#filters" id="filters">Filters</a></h1>
<p>Filters are used to process the result of an expression in a template.</p>
<h2><a class="header" href="#overview" id="overview">Overview</a></h2>
<p>As an example, the expression <code>{{ 'hello' | upper }}</code> uses the &quot;upper&quot; filter to create
the upper case result &quot;HELLO&quot;.</p>
<h2><a class="header" href="#built-in-filters" id="built-in-filters">Built in filters</a></h2>
<ul>
<li>require: Will throw an error if the result is empty or null</li>
<li>default(any): Replaces empty, null, or error types with the default value from the args</li>
<li>length: Returns the length of a string or array</li>
<li>lower: Lowercase the rendered result</li>
<li>upper: Uppercase the rendered result</li>
<li>trim: Trim whitespace off the rendered result</li>
<li>split(str?): Split a string into an array. Delimited by newline, but an arg can be used to override the delimiter.</li>
<li>index(int): Retrieve the int index from the array</li>
<li>join(str?): Join an array with the provided string. Defaults to newline</li>
<li>string: Forces the result into a string type, usually by rendering it</li>
<li>key(str): Retrieve the value of the specified key from the dictionary</li>
<li>escape_html: (alias 'e') Render the result and escape HTML characters</li>
<li>yaml: (alias yml) Serialize the data into a YAML string. Requires&quot;yaml-extension&quot; feature (default on)</li>
<li>json(str?): Serialize the data into a JSON string. Set str to 'pretty' to print with indentation. Requires the &quot;json-extension&quot; feature (default on)</li>
<li>base64(str?): Encode the result as Base64. If the optional string parameter is set to &quot;decode&quot; then it will try to decode instead. Requires &quot;base64-extension&quot; feature (default on)</li>
</ul>
<h1><a class="header" href="#functions" id="functions">Functions</a></h1>
<p>Functions are used for pulling or creating data from other sources or using other methods.</p>
<h2><a class="header" href="#overview-1" id="overview-1">Overview</a></h2>
<p>As an example, the file() function will open a file and return the contents as a string. Functions do not require
any data to work, though most need arguments. Functions can be used as an argument to other functions,
to filters, or as the base operation. For example, this is a valid expression:</p>
<pre><code class="language-template">{ 'filename': 'settings.json', 'content': json(file('settings.json')) } | yml
</code></pre>
<p>The above will creat a map with two fields &quot;filename&quot; and &quot;content&quot; with content containing the parsed
contents the file <code>settings.json</code>. Then we pass this map to the filter <code>yml</code> to then render
that map into a serialized YML string.</p>
<h2><a class="header" href="#built-in-functions" id="built-in-functions">Built in functions</a></h2>
<ul>
<li>file(str): Open file and read contents to a string</li>
<li>env(str): Read the named environment variable</li>
<li>script(str): Execute the string as a shell script. Returns a map with keys &quot;stdout&quot;, &quot;stderr&quot;, &quot;status&quot;</li>
<li>command(str, str[]?): Execute the supplied command with the supplied arguments. Returns a map with keys &quot;stdout&quot;, &quot;stderr&quot;, &quot;status&quot;</li>
<li>json(str): Parse the supplied JSON string into a map. Requires &quot;json-extension&quot; feature (default on)</li>
<li>yaml(str): (alias yml) Parse the supplied YML string into a map. Requires &quot;yaml-extension&quot; feature (default on)</li>
</ul>
<h1><a class="header" href="#api-documentation" id="api-documentation">API Documentation</a></h1>
<p>Complete documentation for the development API is available at <a href="https://docs.rs/templar/">docs.rs</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
